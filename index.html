<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quackmath</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/GHMzp1T.png">
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap");
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: "Inter", sans-serif; 
            height: 100vh; 
            background: #000; 
            color: #fff; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            overflow: hidden; 
            -webkit-font-smoothing: antialiased;
        }

        body::before { 
            content: ""; position: absolute; width: 120%; height: 120%; 
            background: radial-gradient(circle at 20% 30%, rgba(0, 150, 255, 0.15), transparent 40%), 
                        radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.08), transparent 45%); 
            animation: floatBG 25s linear infinite; z-index: -1; 
        }
        @keyframes floatBG { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(-2%, -2%); } }

        .container { 
            width: 100%; 
            max-width: 520px; 
            padding: 2rem 1.25rem; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 1.25rem;
            flex-grow: 1; 
            justify-content: center;
            position: relative;
        }

        .logo { width: 60px; height: auto; filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.25)); }
        
        h1 { 
            font-size: 2.1rem; 
            font-weight: 700; 
            letter-spacing: -0.02em; 
            text-align: center;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .count-badge {
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.15);
            padding: 4px 10px;
            border-radius: 20px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 600;
        }
        
        #search { 
            width: 100%; 
            padding: 0.85rem 1rem; 
            border-radius: 12px; 
            border: 1px solid rgba(255,255,255,0.1); 
            outline: none; 
            font-size: 1rem; 
            text-align: center; 
            background: rgba(255, 255, 255, 0.08); 
            color: white; 
            backdrop-filter: blur(10px);
            font-family: "Inter", sans-serif;
        }

        ul { 
            width: 100%; 
            list-style: none; 
            display: flex; 
            flex-direction: column; 
            gap: 0.7rem; 
            max-height: 45vh; 
            overflow-y: auto; 
            overflow-x: hidden; 
            padding-right: 5px; 
            scroll-behavior: smooth;
        }
        
        ul::-webkit-scrollbar { width: 4px; }
        ul::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }

        li { width: 100%; text-align: center; }
        
        a { 
            display: block; 
            padding: 1rem; 
            border-radius: 12px; 
            text-decoration: none; 
            font-weight: 600; 
            color: white; 
            background: rgba(255, 255, 255, 0.06); 
            transition: all 0.2s ease; 
            border: 1px solid rgba(255,255,255,0.05); 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis;
            text-align: center;
        }
        a:hover { background: rgba(255, 255, 255, 0.12); transform: translateY(-2px); }

        .loader-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }
        .custom-loader {
            width: 120px; 
            height: auto;
        }

        #scrollTop {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            z-index: 100;
        }
        
        footer { 
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 0.85rem; 
            color: rgba(255, 255, 255, 0.5); 
            position: relative;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://i.imgur.com/GHMzp1T.png" alt="Logo" class="logo">
        <h1>Quackmath <span id="gameCount" class="count-badge">0</span></h1>
        <input type="text" id="search" placeholder="Search games...">
        <ul id="gameList">
            <div class="loader-container">
                <img src="https://i.imgur.com/u1UwWFz.gif" class="custom-loader" alt="Loading...">
            </div>
        </ul>
    </div>

    <button id="scrollTop" title="Go to top">⬆</button>

    <footer>Made with ♡ by Quackmath</footer>

    <script>
        const list = document.getElementById('gameList');
        const search = document.getElementById('search');
        const countBadge = document.getElementById('gameCount');
        const scrollBtn = document.getElementById('scrollTop');
        let games = [];

        const blockList = [
            'howo.pages.dev', 'itafricagroup', 'leeschoolsk12', 'frogiesarcade', 'bostoncareercounselor',
            'travelpage.biz', 'neo-space.space', 'dj-jam.be', 'cloe.', 'adaptor.', 'berkatdoa',
            'cbu.net', 'geographyles', 'i5.ca', 'forms.gle', 'discord.gg', 'report abuse', 'learn more'
        ];

        fetch('https://docs.google.com/document/d/e/2PACX-1vQBKBzjpOyjHA9PHl3NQi3am0RHVYOLMCCyfk5U2QAjqbB5tnG68XRZgGneMnQeAbI-cstsj08j_yhE/pub')
            .then(r => r.text())
            .then(html => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const links = doc.querySelectorAll('a');
                
                for (let link of links) {
                    let name = link.innerText.trim();
                    const url = new URL(link.href).searchParams.get('q') || link.href;

                    if (name.toLowerCase().includes('ruffle.html')) break;
                    if (blockList.some(term => url.toLowerCase().includes(term) || name.toLowerCase().includes(term))) continue;

                    if (name.length > 2) {
                        let cleanName = name
                            .replace(/\.html/gi, '')
                            .replace(/cl/gi, '') 
                            .replace(/\s+/g, ' ') 
                            .trim();

                        if(cleanName) games.push({ name: cleanName, url: url });
                    }
                }
                render();
            });

        function render(filter = '') {
            list.innerHTML = '';
            const filtered = games.filter(g => g.name.toLowerCase().includes(filter.toLowerCase()));
            countBadge.textContent = filtered.length;
            
            if (filtered.length === 0 && games.length > 0) {
                list.innerHTML = '<li style="opacity: 0.5; padding-top: 20px;">No games found</li>';
                return;
            }

            filtered.forEach(g => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = g.url;
                a.target = '_blank';
                a.textContent = g.name;
                li.appendChild(a);
                list.appendChild(li);
            });
        }

        search.addEventListener('input', e => render(e.target.value));
        list.addEventListener('scroll', () => {
            scrollBtn.style.display = list.scrollTop > 200 ? 'flex' : 'none';
        });
        scrollBtn.addEventListener('click', () => {
            list.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>
